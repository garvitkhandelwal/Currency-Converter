{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"react-native","data":{"isAsync":false}},{"name":"./sheet","data":{"isAsync":false}},{"name":"./style","data":{"isAsync":false}},{"name":"./value","data":{"isAsync":false}},{"name":"./replacers/vars","data":{"isAsync":false}},{"name":"./replacers/media-queries","data":{"isAsync":false}},{"name":"./child","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[3], \"react-native\");\n\n  var _sheet = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"./sheet\"));\n\n  var _style = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"./style\"));\n\n  var _value = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"./value\"));\n\n  var _vars = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[7], \"./replacers/vars\"));\n\n  var _mediaQueries = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[8], \"./replacers/media-queries\"));\n\n  var _child = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[9], \"./child\"));\n\n  var BUILD_EVENT = 'build';\n\n  var EStyleSheet = function () {\n    function EStyleSheet() {\n      (0, _classCallCheck2.default)(this, EStyleSheet);\n      this.child = _child.default;\n      this.builded = false;\n      this.sheets = [];\n      this.globalVars = null;\n      this.listeners = {};\n\n      this._proxyToOriginal();\n    }\n\n    (0, _createClass2.default)(EStyleSheet, [{\n      key: \"create\",\n      value: function create(obj) {\n        var sheet = new _sheet.default(obj);\n        this.sheets.push(sheet);\n\n        if (this.builded) {\n          sheet.calc(this.globalVars);\n        }\n\n        return sheet.getResult();\n      }\n    }, {\n      key: \"build\",\n      value: function build(rawGlobalVars) {\n        this.builded = true;\n\n        this._calcGlobalVars(rawGlobalVars);\n\n        this._calcSheets();\n\n        this._callListeners(BUILD_EVENT);\n      }\n    }, {\n      key: \"value\",\n      value: function value(expr, prop) {\n        var varsArr = this.globalVars ? [this.globalVars] : [];\n        return new _value.default(expr, prop, varsArr).calc();\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe(event, listener) {\n        if (event !== BUILD_EVENT) {\n          throw new Error(\"Only '\" + BUILD_EVENT + \"' event is currently supported.\");\n        }\n\n        if (typeof listener !== 'function') {\n          throw new Error('Listener should be a function.');\n        }\n\n        if (this.builded) {\n          listener();\n        } else {\n          this.listeners[BUILD_EVENT] = this.listeners[BUILD_EVENT] || [];\n          this.listeners[BUILD_EVENT].push(listener);\n        }\n      }\n    }, {\n      key: \"clearCache\",\n      value: function clearCache() {\n        this.sheets.forEach(function (sheet) {\n          return sheet.clearCache();\n        });\n      }\n    }, {\n      key: \"_calcGlobalVars\",\n      value: function _calcGlobalVars(rawGlobalVars) {\n        if (rawGlobalVars) {\n          this._checkGlobalVars(rawGlobalVars);\n\n          rawGlobalVars.$theme = rawGlobalVars.$theme || 'default';\n          this.globalVars = new _style.default(rawGlobalVars, [rawGlobalVars]).calc().calculatedVars;\n        }\n      }\n    }, {\n      key: \"_calcSheets\",\n      value: function _calcSheets() {\n        var _this = this;\n\n        this.sheets.forEach(function (sheet) {\n          return sheet.calc(_this.globalVars);\n        });\n      }\n    }, {\n      key: \"_callListeners\",\n      value: function _callListeners(event) {\n        if (Array.isArray(this.listeners[event])) {\n          this.listeners[event].forEach(function (listener) {\n            return listener();\n          });\n        }\n      }\n    }, {\n      key: \"_proxyToOriginal\",\n      value: function _proxyToOriginal() {\n        var _this2 = this;\n\n        var props = ['setStyleAttributePreprocessor', 'hairlineWidth', 'absoluteFill', 'absoluteFillObject', 'flatten'];\n        props.forEach(function (prop) {\n          Object.defineProperty(_this2, prop, {\n            get: function get() {\n              return _reactNative.StyleSheet[prop];\n            },\n            enumerable: true\n          });\n        });\n      }\n    }, {\n      key: \"_checkGlobalVars\",\n      value: function _checkGlobalVars(rawGlobalVars) {\n        Object.keys(rawGlobalVars).forEach(function (key) {\n          if (!_vars.default.isVar(key) && !_mediaQueries.default.isMediaQuery(key)) {\n            throw new Error(\"EStyleSheet.build() params should contain global variables (start with $) \" + (\"or media queries (start with @media). Got '\" + key + \"'.\"));\n          }\n        });\n      }\n    }]);\n    return EStyleSheet;\n  }();\n\n  exports.default = EStyleSheet;\n});","map":[[13,0,5,0],[15,0,6,0],[17,0,7,0],[19,0,8,0],[21,0,9,0],[23,0,10,0],[25,0,11,0],[27,0,13,0],[27,6,13,6,"BUILD_EVENT"],[27,17,13,17],[27,20,13,20],[27,27,13,0],[29,6,15,21,"EStyleSheet"],[29,17],[30,0,19,2],[30,27,19,16],[31,0,19,16],[32,0,20,4],[32,11,20,9,"child"],[32,16,20,4],[32,19,20,17,"child"],[32,33,20,4],[33,0,21,4],[33,11,21,9,"builded"],[33,18,21,4],[33,21,21,19],[33,26,21,4],[34,0,22,4],[34,11,22,9,"sheets"],[34,17,22,4],[34,20,22,18],[34,22,22,4],[35,0,23,4],[35,11,23,9,"globalVars"],[35,21,23,4],[35,24,23,22],[35,28,23,4],[36,0,24,4],[36,11,24,9,"listeners"],[36,20,24,4],[36,23,24,21],[36,25,24,4],[38,0,25,4],[38,11,25,9,"_proxyToOriginal"],[38,27,25,4],[39,0,26,3],[43,29,33,9,"obj"],[43,32],[43,34,33,14],[44,0,34,4],[44,12,34,10,"sheet"],[44,17,34,15],[44,20,34,18],[44,24,34,22,"Sheet"],[44,38,34,18],[44,39,34,28,"obj"],[44,42,34,18],[44,43,34,4],[45,0,36,4],[45,13,36,9,"sheets"],[45,19,36,4],[45,20,36,16,"push"],[45,24,36,4],[45,25,36,21,"sheet"],[45,30,36,4],[47,0,37,4],[47,12,37,8],[47,17,37,13,"builded"],[47,24,37,4],[47,26,37,22],[48,0,38,6,"sheet"],[48,10,38,6,"sheet"],[48,15,38,11],[48,16,38,12,"calc"],[48,20,38,6],[48,21,38,17],[48,26,38,22,"globalVars"],[48,36,38,6],[49,0,39,5],[51,0,40,4],[51,15,40,11,"sheet"],[51,20,40,16],[51,21,40,17,"getResult"],[51,30,40,11],[51,32,40,4],[52,0,41,3],[55,28,47,8,"rawGlobalVars"],[55,41],[55,43,47,23],[56,0,48,4],[56,13,48,9,"builded"],[56,20,48,4],[56,23,48,19],[56,27,48,4],[58,0,49,4],[58,13,49,9,"_calcGlobalVars"],[58,28,49,4],[58,29,49,25,"rawGlobalVars"],[58,42,49,4],[60,0,50,4],[60,13,50,9,"_calcSheets"],[60,24,50,4],[62,0,51,4],[62,13,51,9,"_callListeners"],[62,27,51,4],[62,28,51,24,"BUILD_EVENT"],[62,39,51,4],[63,0,52,3],[66,28,60,8,"expr"],[66,32],[66,34,60,14,"prop"],[66,38],[66,40,60,20],[67,0,61,4],[67,12,61,8,"varsArr"],[67,19,61,15],[67,22,61,18],[67,27,61,23,"globalVars"],[67,37,61,18],[67,40,61,36],[67,41,61,37],[67,46,61,42,"globalVars"],[67,56,61,36],[67,57,61,18],[67,60,61,56],[67,62,61,4],[68,0,62,4],[68,15,62,11],[68,19,62,15,"Value"],[68,33,62,11],[68,34,62,21,"expr"],[68,38,62,11],[68,40,62,27,"prop"],[68,44,62,11],[68,46,62,33,"varsArr"],[68,53,62,11],[68,55,62,42,"calc"],[68,59,62,11],[68,61,62,4],[69,0,63,3],[72,32,70,12,"event"],[72,37],[72,39,70,19,"listener"],[72,47],[72,49,70,29],[73,0,71,4],[73,12,71,8,"event"],[73,17,71,13],[73,22,71,18,"BUILD_EVENT"],[73,33,71,4],[73,35,71,31],[74,0,72,6],[74,16,72,12],[74,20,72,16,"Error"],[74,25,72,12],[74,37,72,31,"BUILD_EVENT"],[74,48,72,12],[74,85,72,6],[75,0,73,5],[77,0,74,4],[77,12,74,8],[77,19,74,15,"listener"],[77,27,74,8],[77,32,74,28],[77,42,74,4],[77,44,74,40],[78,0,75,6],[78,16,75,12],[78,20,75,16,"Error"],[78,25,75,12],[78,26,75,22],[78,58,75,12],[78,59,75,6],[79,0,76,5],[81,0,77,4],[81,12,77,8],[81,17,77,13,"builded"],[81,24,77,4],[81,26,77,22],[82,0,78,6,"listener"],[82,10,78,6,"listener"],[82,18,78,14],[83,0,79,5],[83,9,77,4],[83,15,79,11],[84,0,80,6],[84,15,80,11,"listeners"],[84,24,80,6],[84,25,80,21,"BUILD_EVENT"],[84,36,80,6],[84,40,80,36],[84,45,80,41,"listeners"],[84,54,80,36],[84,55,80,51,"BUILD_EVENT"],[84,66,80,36],[84,71,80,67],[84,73,80,6],[85,0,81,6],[85,15,81,11,"listeners"],[85,24,81,6],[85,25,81,21,"BUILD_EVENT"],[85,36,81,6],[85,38,81,34,"push"],[85,42,81,6],[85,43,81,39,"listener"],[85,51,81,6],[86,0,82,5],[87,0,83,3],[90,35,88,15],[91,0,89,4],[91,13,89,9,"sheets"],[91,19,89,4],[91,20,89,16,"forEach"],[91,27,89,4],[91,28,89,24],[91,38,89,24,"sheet"],[91,43,89,29],[92,0,89,29],[92,17,89,33,"sheet"],[92,22,89,38],[92,23,89,39,"clearCache"],[92,33,89,33],[92,35,89,29],[93,0,89,29],[93,9,89,4],[94,0,90,3],[97,38,93,18,"rawGlobalVars"],[97,51],[97,53,93,33],[98,0,94,4],[98,12,94,8,"rawGlobalVars"],[98,25,94,4],[98,27,94,23],[99,0,95,6],[99,15,95,11,"_checkGlobalVars"],[99,31,95,6],[99,32,95,28,"rawGlobalVars"],[99,45,95,6],[101,0,97,6,"rawGlobalVars"],[101,10,97,6,"rawGlobalVars"],[101,23,97,19],[101,24,97,20,"$theme"],[101,30,97,6],[101,33,97,29,"rawGlobalVars"],[101,46,97,42],[101,47,97,43,"$theme"],[101,53,97,29],[101,57,97,53],[101,66,97,6],[102,0,98,6],[102,15,98,11,"globalVars"],[102,25,98,6],[102,28,98,24],[102,32,98,28,"Style"],[102,46,98,24],[102,47,98,34,"rawGlobalVars"],[102,60,98,24],[102,62,98,49],[102,63,98,50,"rawGlobalVars"],[102,76,98,49],[102,77,98,24],[102,79,98,66,"calc"],[102,83,98,24],[102,86,98,73,"calculatedVars"],[102,100,98,6],[103,0,99,5],[104,0,100,3],[107,36,102,16],[108,0,102,16],[110,0,103,4],[110,13,103,9,"sheets"],[110,19,103,4],[110,20,103,16,"forEach"],[110,27,103,4],[110,28,103,24],[110,38,103,24,"sheet"],[110,43,103,29],[111,0,103,29],[111,17,103,33,"sheet"],[111,22,103,38],[111,23,103,39,"calc"],[111,27,103,33],[111,28,103,44],[111,33,103,48],[111,34,103,49,"globalVars"],[111,44,103,33],[111,45,103,29],[112,0,103,29],[112,9,103,4],[113,0,104,3],[116,37,106,17,"event"],[116,42],[116,44,106,24],[117,0,107,4],[117,12,107,8,"Array"],[117,17,107,13],[117,18,107,14,"isArray"],[117,25,107,8],[117,26,107,22],[117,31,107,27,"listeners"],[117,40,107,22],[117,41,107,37,"event"],[117,46,107,22],[117,47,107,8],[117,48,107,4],[117,50,107,46],[118,0,108,6],[118,15,108,11,"listeners"],[118,24,108,6],[118,25,108,21,"event"],[118,30,108,6],[118,32,108,28,"forEach"],[118,39,108,6],[118,40,108,36],[118,50,108,36,"listener"],[118,58,108,44],[119,0,108,44],[119,19,108,48,"listener"],[119,27,108,56],[119,29,108,44],[120,0,108,44],[120,11,108,6],[121,0,109,5],[122,0,110,3],[125,41,112,21],[126,0,112,21],[128,0,114,4],[128,12,114,10,"props"],[128,17,114,15],[128,20,114,18],[128,21,115,6],[128,52,114,18],[128,54,116,6],[128,69,114,18],[128,71,117,6],[128,85,114,18],[128,87,118,6],[128,107,114,18],[128,109,119,6],[128,118,114,18],[128,119,114,4],[129,0,121,4,"props"],[129,8,121,4,"props"],[129,13,121,9],[129,14,121,10,"forEach"],[129,21,121,4],[129,22,121,18],[129,32,121,18,"prop"],[129,36,121,22],[129,38,121,26],[130,0,122,6,"Object"],[130,10,122,6,"Object"],[130,16,122,12],[130,17,122,13,"defineProperty"],[130,31,122,6],[130,32,122,28],[130,38,122,6],[130,40,122,34,"prop"],[130,44,122,6],[130,46,122,40],[131,0,123,8,"get"],[131,12,123,8,"get"],[131,15,123,11],[131,17,123,13],[132,0,123,13],[132,21,123,19,"StyleSheet"],[132,45,123,30,"prop"],[132,49,123,19],[132,50,123,13],[133,0,123,13],[133,13,122,40],[134,0,124,8,"enumerable"],[134,12,124,8,"enumerable"],[134,22,124,18],[134,24,124,20],[135,0,122,40],[135,11,122,6],[136,0,126,5],[136,9,121,4],[137,0,127,3],[140,39,129,19,"rawGlobalVars"],[140,52],[140,54,129,34],[141,0,130,4,"Object"],[141,8,130,4,"Object"],[141,14,130,10],[141,15,130,11,"keys"],[141,19,130,4],[141,20,130,16,"rawGlobalVars"],[141,33,130,4],[141,35,130,31,"forEach"],[141,42,130,4],[141,43,130,39],[141,53,130,39,"key"],[141,56,130,42],[141,58,130,46],[142,0,131,6],[142,14,131,10],[142,15,131,11,"vars"],[142,29,131,16,"isVar"],[142,34,131,11],[142,35,131,22,"key"],[142,38,131,11],[142,39,131,10],[142,43,131,30],[142,44,131,31,"mq"],[142,66,131,34,"isMediaQuery"],[142,78,131,31],[142,79,131,47,"key"],[142,82,131,31],[142,83,131,6],[142,85,131,53],[143,0,132,8],[143,18,132,14],[143,22,132,18,"Error"],[143,27,132,14],[143,28,133,10],[143,156,134,56,"key"],[143,159,133,10],[143,167,132,14],[143,168,132,8],[144,0,136,7],[145,0,137,5],[145,9,130,4],[146,0,138,3]]},"type":"js/module"}]}