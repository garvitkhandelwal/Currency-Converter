{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"react-native","data":{"isAsync":false}},{"name":"./style","data":{"isAsync":false}},{"name":"./utils","data":{"isAsync":false}},{"name":"./replacers/vars","data":{"isAsync":false}},{"name":"./replacers/media-queries","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _extends2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/extends\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[4], \"react-native\");\n\n  var _style = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"./style\"));\n\n  var _utils = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"./utils\"));\n\n  var _vars = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[7], \"./replacers/vars\"));\n\n  var _mediaQueries = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[8], \"./replacers/media-queries\"));\n\n  var _default = function () {\n    function _default(source) {\n      (0, _classCallCheck2.default)(this, _default);\n      this.source = source;\n      this.result = Object.create(null);\n      this.cache = new Map();\n      this.nativeSheet = {};\n      this.globalVars = null;\n      this.localVars = null;\n      this.allVars = null;\n      this.processedSource = null;\n    }\n\n    (0, _createClass2.default)(_default, [{\n      key: \"calc\",\n      value: function calc(globalVars) {\n        this.globalVars = globalVars;\n        this.clearResult();\n\n        if (this.hasCache()) {\n          this.applyCache();\n        } else {\n          this.processMediaQueries();\n          this.calcVars();\n          this.calcStyles();\n          this.calcNative();\n          this.storeCache();\n        }\n\n        return this.getResult();\n      }\n    }, {\n      key: \"processMediaQueries\",\n      value: function processMediaQueries() {\n        this.processedSource = _mediaQueries.default.process(this.source);\n      }\n    }, {\n      key: \"calcVars\",\n      value: function calcVars() {\n        var rawLocalVars = _vars.default.extract(this.processedSource);\n\n        if (rawLocalVars) {\n          this.localVars = new _style.default(rawLocalVars, [rawLocalVars, this.globalVars]).calc().calculatedVars;\n          (0, _extends2.default)(this.result, this.localVars);\n        } else {\n          this.localVars = null;\n        }\n\n        this.allVars = [this.localVars, this.globalVars].filter(Boolean);\n      }\n    }, {\n      key: \"calcStyles\",\n      value: function calcStyles() {\n        var _this = this;\n\n        var extractedStyles = _utils.default.excludeKeys(this.processedSource, this.localVars);\n\n        Object.keys(extractedStyles).forEach(function (key) {\n          var styles = extractedStyles[key];\n\n          if (typeof styles === 'function') {\n            styles = styles();\n          }\n\n          if (styles && typeof styles === 'object') {\n            _this.calcStyle(key, styles);\n          } else {\n            _this.result[key] = styles;\n          }\n        });\n      }\n    }, {\n      key: \"calcStyle\",\n      value: function calcStyle(key, styleProps) {\n        var style = new _style.default(styleProps, this.allVars);\n\n        var _style$calc = style.calc(),\n            calculatedProps = _style$calc.calculatedProps,\n            calculatedVars = _style$calc.calculatedVars;\n\n        var merged = (0, _extends2.default)({}, calculatedVars, calculatedProps);\n\n        if (key.charAt(0) === '_') {\n          this.result[key] = merged;\n        } else {\n          this.result['_' + key] = merged;\n          this.nativeSheet[key] = calculatedProps;\n        }\n      }\n    }, {\n      key: \"calcNative\",\n      value: function calcNative() {\n        if (Object.keys(this.nativeSheet).length) {\n          var rnStyleSheet = _reactNative.StyleSheet.create(this.nativeSheet);\n\n          (0, _extends2.default)(this.result, rnStyleSheet);\n        }\n      }\n    }, {\n      key: \"getResult\",\n      value: function getResult() {\n        return this.result;\n      }\n    }, {\n      key: \"clearResult\",\n      value: function clearResult() {\n        var _this2 = this;\n\n        Object.keys(this.result).forEach(function (key) {\n          return delete _this2.result[key];\n        });\n      }\n    }, {\n      key: \"hasCache\",\n      value: function hasCache() {\n        var key = this.getCacheKey();\n        return key && this.cache.has(key);\n      }\n    }, {\n      key: \"applyCache\",\n      value: function applyCache() {\n        var cachedResult = this.cache.get(this.getCacheKey());\n        (0, _extends2.default)(this.result, cachedResult);\n      }\n    }, {\n      key: \"storeCache\",\n      value: function storeCache() {\n        var key = this.getCacheKey();\n\n        if (key) {\n          this.cache.set(key, (0, _extends2.default)({}, this.result));\n        }\n      }\n    }, {\n      key: \"clearCache\",\n      value: function clearCache() {\n        this.cache.clear();\n      }\n    }, {\n      key: \"getCacheKey\",\n      value: function getCacheKey() {\n        return this.globalVars && this.globalVars.$theme;\n      }\n    }]);\n    return _default;\n  }();\n\n  exports.default = _default;\n});","map":[[15,0,1,0],[17,0,2,0],[19,0,3,0],[21,0,4,0],[23,0,5,0],[26,0,12,2],[26,22,12,14,"source"],[26,28,12,2],[26,30,12,22],[27,0,12,22],[28,0,13,4],[28,11,13,9,"source"],[28,17,13,4],[28,20,13,18,"source"],[28,26,13,4],[29,0,14,4],[29,11,14,9,"result"],[29,17,14,4],[29,20,14,18,"Object"],[29,26,14,24],[29,27,14,25,"create"],[29,33,14,18],[29,34,14,32],[29,38,14,18],[29,39,14,4],[30,0,15,4],[30,11,15,9,"cache"],[30,16,15,4],[30,19,15,17],[30,23,15,21,"Map"],[30,26,15,17],[30,28,15,4],[31,0,16,4],[31,11,16,9,"nativeSheet"],[31,22,16,4],[31,25,16,23],[31,27,16,4],[32,0,17,4],[32,11,17,9,"globalVars"],[32,21,17,4],[32,24,17,22],[32,28,17,4],[33,0,18,4],[33,11,18,9,"localVars"],[33,20,18,4],[33,23,18,21],[33,27,18,4],[34,0,19,4],[34,11,19,9,"allVars"],[34,18,19,4],[34,21,19,19],[34,25,19,4],[35,0,20,4],[35,11,20,9,"processedSource"],[35,26,20,4],[35,29,20,27],[35,33,20,4],[36,0,21,3],[40,27,27,7,"globalVars"],[40,37],[40,39,27,19],[41,0,28,4],[41,13,28,9,"globalVars"],[41,23,28,4],[41,26,28,22,"globalVars"],[41,36,28,4],[42,0,29,4],[42,13,29,9,"clearResult"],[42,24,29,4],[44,0,30,4],[44,12,30,8],[44,17,30,13,"hasCache"],[44,25,30,8],[44,27,30,4],[44,29,30,25],[45,0,31,6],[45,15,31,11,"applyCache"],[45,25,31,6],[46,0,32,5],[46,9,30,4],[46,15,32,11],[47,0,33,6],[47,15,33,11,"processMediaQueries"],[47,34,33,6],[48,0,34,6],[48,15,34,11,"calcVars"],[48,23,34,6],[49,0,35,6],[49,15,35,11,"calcStyles"],[49,25,35,6],[50,0,36,6],[50,15,36,11,"calcNative"],[50,25,36,6],[51,0,37,6],[51,15,37,11,"storeCache"],[51,25,37,6],[52,0,38,5],[54,0,39,4],[54,15,39,11],[54,20,39,16,"getResult"],[54,29,39,11],[54,31,39,4],[55,0,40,3],[58,44,42,24],[59,0,43,4],[59,13,43,9,"processedSource"],[59,28,43,4],[59,31,43,27,"mediaQueries"],[59,53,43,40,"process"],[59,60,43,27],[59,61,43,48],[59,66,43,53,"source"],[59,72,43,27],[59,73,43,4],[60,0,44,3],[63,33,46,13],[64,0,47,4],[64,12,47,10,"rawLocalVars"],[64,24,47,22],[64,27,47,25,"vars"],[64,41,47,30,"extract"],[64,48,47,25],[64,49,47,38],[64,54,47,43,"processedSource"],[64,69,47,25],[64,70,47,4],[66,0,48,4],[66,12,48,8,"rawLocalVars"],[66,24,48,4],[66,26,48,22],[67,0,49,6],[67,15,49,11,"localVars"],[67,24,49,6],[67,27,49,23],[67,31,49,27,"Style"],[67,45,49,23],[67,46,49,33,"rawLocalVars"],[67,58,49,23],[67,60,49,47],[67,61,49,48,"rawLocalVars"],[67,73,49,47],[67,75,49,62],[67,80,49,67,"globalVars"],[67,90,49,47],[67,91,49,23],[67,93,49,80,"calc"],[67,97,49,23],[67,100,49,87,"calculatedVars"],[67,114,49,6],[68,0,50,6],[68,33,50,20],[68,38,50,25,"result"],[68,44,50,6],[68,46,50,33],[68,51,50,38,"localVars"],[68,60,50,6],[69,0,51,5],[69,9,48,4],[69,15,51,11],[70,0,52,6],[70,15,52,11,"localVars"],[70,24,52,6],[70,27,52,23],[70,31,52,6],[71,0,53,5],[73,0,54,4],[73,13,54,9,"allVars"],[73,20,54,4],[73,23,54,19],[73,24,54,20],[73,29,54,25,"localVars"],[73,38,54,19],[73,40,54,36],[73,45,54,41,"globalVars"],[73,55,54,19],[73,57,54,53,"filter"],[73,63,54,19],[73,64,54,60,"Boolean"],[73,71,54,19],[73,72,54,4],[74,0,55,3],[77,35,57,15],[78,0,57,15],[80,0,58,4],[80,12,58,10,"extractedStyles"],[80,27,58,25],[80,30,58,28,"utils"],[80,45,58,34,"excludeKeys"],[80,56,58,28],[80,57,58,46],[80,62,58,51,"processedSource"],[80,77,58,28],[80,79,58,68],[80,84,58,73,"localVars"],[80,93,58,28],[80,94,58,4],[82,0,59,4,"Object"],[82,8,59,4,"Object"],[82,14,59,10],[82,15,59,11,"keys"],[82,19,59,4],[82,20,59,16,"extractedStyles"],[82,35,59,4],[82,37,59,33,"forEach"],[82,44,59,4],[82,45,59,41],[82,55,59,41,"key"],[82,58,59,44],[82,60,59,48],[83,0,60,6],[83,14,60,10,"styles"],[83,20,60,16],[83,23,60,19,"extractedStyles"],[83,38,60,34],[83,39,60,35,"key"],[83,42,60,34],[83,43,60,6],[85,0,61,6],[85,14,61,10],[85,21,61,17,"styles"],[85,27,61,10],[85,32,61,28],[85,42,61,6],[85,44,61,40],[86,0,62,8,"styles"],[86,12,62,8,"styles"],[86,18,62,14],[86,21,62,17,"styles"],[86,27,62,23],[86,29,62,8],[87,0,63,7],[89,0,64,6],[89,14,64,10,"styles"],[89,20,64,16],[89,24,64,20],[89,31,64,27,"styles"],[89,37,64,20],[89,42,64,38],[89,50,64,6],[89,52,64,48],[90,0,65,8],[90,12,65,8],[90,17,65,12],[90,18,65,13,"calcStyle"],[90,27,65,8],[90,28,65,23,"key"],[90,31,65,8],[90,33,65,28,"styles"],[90,39,65,8],[91,0,66,7],[91,11,64,6],[91,17,66,13],[92,0,68,8],[92,12,68,8],[92,17,68,12],[92,18,68,13,"result"],[92,24,68,8],[92,25,68,20,"key"],[92,28,68,8],[92,32,68,27,"styles"],[92,38,68,8],[93,0,69,7],[94,0,70,5],[94,9,59,4],[95,0,71,3],[98,32,73,12,"key"],[98,35],[98,37,73,17,"styleProps"],[98,47],[98,49,73,29],[99,0,74,4],[99,12,74,10,"style"],[99,17,74,15],[99,20,74,18],[99,24,74,22,"Style"],[99,38,74,18],[99,39,74,28,"styleProps"],[99,49,74,18],[99,51,74,40],[99,56,74,45,"allVars"],[99,63,74,18],[99,64,74,4],[101,0,73,29],[101,26,75,46,"style"],[101,31,75,51],[101,32,75,52,"calc"],[101,36,75,46],[101,38,73,29],[102,0,73,29],[102,12,75,11,"calculatedProps"],[102,27,73,29],[102,42,75,11,"calculatedProps"],[102,57,73,29],[103,0,73,29],[103,12,75,28,"calculatedVars"],[103,26,73,29],[103,41,75,28,"calculatedVars"],[103,55,73,29],[105,0,76,4],[105,12,76,10,"merged"],[105,18,76,16],[105,21,76,19],[105,44,76,33],[105,46,76,19],[105,48,76,37,"calculatedVars"],[105,62,76,19],[105,64,76,53,"calculatedProps"],[105,79,76,19],[105,80,76,4],[107,0,77,4],[107,12,77,8,"key"],[107,15,77,11],[107,16,77,12,"charAt"],[107,22,77,8],[107,23,77,19],[107,24,77,8],[107,30,77,26],[107,33,77,4],[107,35,77,31],[108,0,78,6],[108,15,78,11,"result"],[108,21,78,6],[108,22,78,18,"key"],[108,25,78,6],[108,29,78,25,"merged"],[108,35,78,6],[109,0,79,5],[109,9,77,4],[109,15,79,11],[110,0,80,6],[110,15,80,11,"result"],[110,21,80,6],[110,22,80,18],[110,28,80,24,"key"],[110,31,80,6],[110,35,80,31,"merged"],[110,41,80,6],[111,0,81,6],[111,15,81,11,"nativeSheet"],[111,26,81,6],[111,27,81,23,"key"],[111,30,81,6],[111,34,81,30,"calculatedProps"],[111,49,81,6],[112,0,82,5],[113,0,83,3],[116,35,85,15],[117,0,86,4],[117,12,86,8,"Object"],[117,18,86,14],[117,19,86,15,"keys"],[117,23,86,8],[117,24,86,20],[117,29,86,25,"nativeSheet"],[117,40,86,8],[117,42,86,38,"length"],[117,48,86,4],[117,50,86,46],[118,0,87,6],[118,14,87,12,"rnStyleSheet"],[118,26,87,24],[118,29,87,27,"StyleSheet"],[118,53,87,38,"create"],[118,59,87,27],[118,60,87,45],[118,65,87,50,"nativeSheet"],[118,76,87,27],[118,77,87,6],[120,0,88,6],[120,33,88,20],[120,38,88,25,"result"],[120,44,88,6],[120,46,88,33,"rnStyleSheet"],[120,58,88,6],[121,0,89,5],[122,0,90,3],[125,34,92,14],[126,0,93,4],[126,15,93,11],[126,20,93,16,"result"],[126,26,93,4],[127,0,94,3],[130,36,96,16],[131,0,96,16],[133,0,97,4,"Object"],[133,8,97,4,"Object"],[133,14,97,10],[133,15,97,11,"keys"],[133,19,97,4],[133,20,97,16],[133,25,97,21,"result"],[133,31,97,4],[133,33,97,29,"forEach"],[133,40,97,4],[133,41,97,37],[133,51,97,37,"key"],[133,54,97,40],[134,0,97,40],[134,17,97,44],[134,24,97,51],[134,30,97,55],[134,31,97,56,"result"],[134,37,97,51],[134,38,97,63,"key"],[134,41,97,51],[134,42,97,40],[135,0,97,40],[135,9,97,4],[136,0,98,3],[139,33,100,13],[140,0,101,4],[140,12,101,10,"key"],[140,15,101,13],[140,18,101,16],[140,23,101,21,"getCacheKey"],[140,34,101,16],[140,36,101,4],[141,0,102,4],[141,15,102,11,"key"],[141,18,102,14],[141,22,102,18],[141,27,102,23,"cache"],[141,32,102,18],[141,33,102,29,"has"],[141,36,102,18],[141,37,102,33,"key"],[141,40,102,18],[141,41,102,4],[142,0,103,3],[145,35,105,15],[146,0,106,4],[146,12,106,10,"cachedResult"],[146,24,106,22],[146,27,106,25],[146,32,106,30,"cache"],[146,37,106,25],[146,38,106,36,"get"],[146,41,106,25],[146,42,106,40],[146,47,106,45,"getCacheKey"],[146,58,106,40],[146,60,106,25],[146,61,106,4],[147,0,107,4],[147,31,107,18],[147,36,107,23,"result"],[147,42,107,4],[147,44,107,31,"cachedResult"],[147,56,107,4],[148,0,108,3],[151,35,110,15],[152,0,111,4],[152,12,111,10,"key"],[152,15,111,13],[152,18,111,16],[152,23,111,21,"getCacheKey"],[152,34,111,16],[152,36,111,4],[154,0,112,4],[154,12,112,8,"key"],[154,15,112,4],[154,17,112,13],[155,0,113,6],[155,15,113,11,"cache"],[155,20,113,6],[155,21,113,17,"set"],[155,24,113,6],[155,25,113,21,"key"],[155,28,113,6],[155,30,113,26],[155,53,113,40],[155,55,113,26],[155,57,113,44],[155,62,113,49,"result"],[155,68,113,26],[155,69,113,6],[156,0,114,5],[157,0,115,3],[160,35,117,15],[161,0,118,4],[161,13,118,9,"cache"],[161,18,118,4],[161,19,118,15,"clear"],[161,24,118,4],[162,0,119,3],[165,36,121,16],[166,0,122,4],[166,15,122,11],[166,20,122,16,"globalVars"],[166,30,122,11],[166,34,122,30],[166,39,122,35,"globalVars"],[166,49,122,30],[166,50,122,46,"$theme"],[166,56,122,4],[167,0,123,3]]},"type":"js/module"}]}